<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="/css/main.css" rel="stylesheet">
<title>Home</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script>
$(document).ready(() => {
$('#stadiumButton').click(() => {
  $.ajax({
  url: 'players/',
  type: 'GET',
  dataType : 'json',
  success: (data) => {
  $('#status').html('All users: ' + data);
  },
  });
});

$('#searchButton').click(() => {
const reqUrl = 'players/' + $('#nameBox').val();
/*
TODO: WORK ON REMOVE SPACE BETWEEN NAMES
*/
  $.ajax({
  url: reqUrl,
  type: 'GET',
  dataType: 'json',
  success: (data) => {
  if(data.ppg && data.mpg && data.best && data.worst && data.img){
    console.log("Found player: ", data);
    if(data.img == "kobe.png"){
      location.href = "/player";
    }
   }else{
    console.log("Error, could not find ", data);
    }
  },
  });
});

$('#matchButton').click(() =>{
  $.ajax({
  url: 'matches/',
  type: 'GET',
  dataType: 'json',
  success: (data) => {
    $('#matches').append("<b>" + "Todays Games" + "</b>");
    data.forEach(function(par) {
      $.ajax({
      url: 'matches/' + par,
      type: 'GET',
      dataType: 'json',
      success: (data) =>{
        $('#matches').append("<ul>" + par + " vs. " + data.opponent + "</ul>");
        console.log(data);
        },
      });
    });
  },
  });
});

$('#rankingsButton').click(() => {
  $.ajax({
  url: 'players/',
  type: 'GET',
  dataType : 'json',
  success: (data) => {
    console.log('You received some data!', data);
    $('#status').html('All users: ' + data);
    },
  });
});

$(document).ajaxError(() => {
  $('#status').html('Error: unknown ajax error!');
  });
});
</script>

</head>
<body>
    <div class="three-section" id="left-triple-section">
<h1>Rankings</h1>

  <div class="content-card" id="player-rankings">

<ol type="1">
<li id="rank1"><a href="/players/JamesHarden">James Harden</a></li>
<li id="rank2"><a href="/players/AnthonyDavis">Anthony Davis</a></li>
<li id="rank3"><a href="/players/GiannisAntetokounmpo">Giannis Antetokounmpo</a></li>
<li id="rank4"><a href="/players/DamianLillard">Damian Lillard</a></li>
<li id="rank5"><a href="/players/Stephen Curry">Stephen Curry</a></li>
</ol>
</div>
</div>
<button id="rankingsButton">More Rankings</button>

    <div class="three-section" id="middle-triple-section">
    <h1>Team Rankings</h1>
    <div class="content-card" id="player-trending">
  <ol type="1">
    <li id="rank1"><a href="/teams/HOU">Houston Rockets</a></li>
    <li id="rank2"><a href="/teams/TOR">Toronto Raptors</a></li>
    <li id="rank3"><a href="/teams/GSW">Golden State Warriors</a></li>
    <li id="rank4"><a href="/teams/BOS">Boston Celtics</a></li>
    <li id="rank5"><a href="/teams/PHI">Philadelphia 76ers</a></li>
  </ol>
</div>
</div>

<div class="three-section" id="right-triple-section">
<h1>Upcoming Games</h1>
<div class="content-card" id="player-trending">
<ol type="1">
<li id="rank1">Lakers vs. Jets</li>
<li id="rank2">Wizards vs. Clippers</li>
<li id="rank3">Warriors vs. Cavaliers</li>
<li id="rank4">Raptors vs. Pelicans</li>
<li id="rank5">Nets vs. Knicks</li>
</ol>
</div>
</div>

Search Player: <input id="nameBox" type="text" size="20"/>
  <button id="searchButton">Find Player</button>
<button id="stadiumButton">Get Current Stadiums</button>
<button id="matchButton">Display Matches</button>

<div>Google Maps API will go here.</div>
<hr/>

<div id="status"></div>
<div id="currentPlayer"></div>
<div id="matches"></div>
</body>
</html>
