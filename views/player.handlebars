<!DOCTYPE html>
<html>
<head>
<title>Player</title>
 <link href="/css/styles.css" rel="stylesheet">
 <!-- <link rel="stylesheet" href="/css/bootstrap.min.css" > -->
 <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script>
!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");
</script>
<script>
$(document).ready(() => {
  $('#test-btn').click(() => {
    const testSplit = $('#testing').val().split(' ');
    const firstName = testSplit[0];
    const lastName = testSplit[1];
    const req = 'players/' + firstName + lastName;
    const playerImg = lastName.substring(0,5).toLowerCase() + firstName.substring(0,2).toLowerCase() + "01.jpg";
    const playerUrl = 'https://d2cwpp38twqe55.cloudfront.net/req/201804182/images/players/';
    const twitterUrl = "https://twitter.com/hashtag/" + firstName + lastName;
    $.ajax({
      url: req,
      type: 'GET',
      dataType: 'json',
      success: (data) => {
        $('#player-picture').attr('src',playerUrl + playerImg);
        $('#player-twitter').attr('href', twitterUrl);
        $('#player-twitter').html('#' + firstName + lastName + ' tweets');
        $('#player-name').html(data.name);
        $('#name1').html(data.name);
        $('#player-team').html(data.team);
        $('#player-position').html(data.position);
        $('#field-goal1').html(data.fieldGoalPercent);
        $('#free-throw1').html(data.freeThrowPercent);
        $('#assists1').html(data.assist);
        $('#steals1').html(data.steal);
        $('#blocks1').html(data.block);
        $('#points1').html(data.points);
        $('#minutes1').html(data.minutesPlayed);
      },
    });
  });


  //COMPARE PLAYER BUTTON
  $('#compare-btn').click(() => {
    const cmpSplit = $('#compareSearch').val().split(' ');
    const first = cmpSplit[0];
    const last = cmpSplit[1];
    const req = 'players/' + first + last;
    const cpmImg = last.substring(0,5).toLowerCase() + first.substring(0,2).toLowerCase() + "01.jpg";
    const playerUrl = 'https://d2cwpp38twqe55.cloudfront.net/req/201804182/images/players/';
    $.ajax({
      url: req,
      type: 'GET',
      dataType: 'json',
      success: (data) => {
        $('#player-name').html(data.name);
        $('#name2').html(data.name);
        $('#field-goal2').html(data.fieldGoalPercent);
        $('#free-throw2').html(data.freeThrowPercent);
        $('#assists2').html(data.assist);
        $('#steals2').html(data.steal);
        $('#blocks2').html(data.block);
        $('#points2').html(data.points);
        $('#minutes2').html(data.minutesPlayed);
      },
    });
  });
});
</script>
</head>
<body>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <img href="/" src="../logo.png" alt="Logo" style="height: 36px; margin-right: 16px"></img>
    <a class="navbar-brand" href="/" style="color: #E67747; font-weight: 600;">basket.</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item">
            <a class="nav-link" href="/">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/player">Players</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/team">Teams</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/prediction">Predict</a>
          </li>
        </ul>
      </div>
    </nav>
<div style="text-align: center">
<input id="testing" placeholder="Find a Player" style="width: 80%; margin-top: 16px; height: 48px"></input>
<button class="btn" id="test-btn">Search</button>
</div>
<h1>Player Detail</h1>
<div class="container">
  <div class="row">
    <div class="col">
        <div class="card" style="width: 18rem;">
          <span class="border border-warning"></span>
          <div class="card-body">
            <h2 id="player-name" style="margin-bottom: 16px"></h2>
            <img id="player-picture" src='https://image.flaticon.com/icons/png/128/158/158387.png'></img>
          </div>
        </div>
      </div>
      <div class="col">
          <div class="card" style="width: 18rem;">
            <span class="border border-warning"></span>
            <div class="card-body">
                <h5>Position</h5>
                <p id="player-position"></p>
                <h5>Team</h5>
                <p id="player-team"></p>
                <h5>Social Media</h5>
                <p id="player-social-media"></p>
                <h5>Age</h5>
                <p id="player-age"></p>
                <h5>Height</h5>
                <p id="player-height"></p>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="container">
      <div class="row">
        <div class="col" style="margin-top: 40px">
          <div class="card">
            <div class="card-body">
              <table>
                <tr>
                  <td class="data-label"></td>
                  <td class="name-label" id="name1">Player 1</td>
                  <td class="name-lable" id="name2">Player 2</td>
                </tr>
                <tr>
                  <td class="data-label">Field Goal %</td>
                  <td class="data-value" id="field-goal1"></td>
                  <td class="data-value" id="field-goal2"></td>
                </tr>
                <tr>
                  <td class="data-label">Free Throw %</td>
                  <td class="data-value" id="free-throw1"></td>
                  <td class="data-value" id="free-throw2"></td>
                </tr>
                <tr>
                  <td class="data-label">Assists per Game</td>
                  <td class="data-value" id="assists1"></td>
                  <td class="data-value" id="assists2"></td>
                </tr>
                <tr>
                  <td class="data-label">Steals per Game</td>
                  <td class="data-value" id="steals1"></td>
                  <td class="data-value" id="steals2"></td>
                </tr>
                <tr>
                  <td class="data-label">Blocks per Game</td>
                  <td class="data-value" id="blocks1"></td>
                  <td class="data-value" id="blocks2"></td>
                </tr>
                <tr>
                  <td class="data-label">Points per Game</td>
                  <td class="data-value" id="points1"></td>
                  <td class="data-value" id="points2"></td>
                </tr>
                <tr>
                  <td class="data-label">Minutes per Game</td>
                  <td class="data-value" id="minutes1"></td>
                  <td class="data-value" id="minutes2"></td>
                </tr>
              </table>
              <div>
                <input class="form-control mr-sm-2" id="compareSearch"  placeholder="Add a Player to Compare" aria-label="Search">
                <button class="btn btn-outline-success my-2 my-sm-0" id="compare-btn">Search</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
</body>
